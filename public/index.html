<!DOCTYPE html>
<html>
<head>
</head>
<body>

<div>
  <h1>Clover Cloud Connector Unit Examples</h1>
  <a href="https://github.com/clover/clover-cloud-connector-unit-examples">GIT Repository</a>
</div>

<p></p>

<p>
If redirected to Clover to login, you will need to select a 'test' button again after you log in.
</p>
<table style="border: 1px solid">
  <tr>
    <td>
      <b>Configuration</b><br/>
      The displayed value here is an example.  You can change it and select the [SaveConfig] button.
    </td>
    <td>
      <b>Messages</b>
    </td>
  </tr>
  <tr>
    <td>
      <textarea title="Configuration" id="configText" style="width: 350px; height: 150px;">
        {
          "clientId": "V1T1VKQC8Y65Y",
          "remoteApplicationId": "com.clover.remotepay.cloud.unit.examples:0.0.1-beta1",
          "deviceSerialId": "C031UQ52340045",
          "domain": "https://dev1.dev.clover.com/",
          "friendlyId": "test"
        }
      </textarea>
    </td>
    <td>
      <textarea title="Messages" id="infoMessages" style="width: 350px; height: 150px;">
      </textarea><br/>
      <button onclick="clearMessages()">Clear Messages</button>
    </td>
  </tr>
</table>

<script src="./built/test.js"></script>
<script>
  function saveConfigStatic() {
    TestBase.simpleCloverConfig.saveCloverConfig("./configuration/",
        JSON.parse(document.getElementById("configText").value), saveConfigStaticResult)
  }
  function saveConfigStaticResult() {
    console.info(arguments);
  }
  /**
   * Used to update any UI elements with info from a call.
   *
   * @param message - has optional properties
   *  {message:string, request:BaseRequest, response:BaseResponse, error:Object, success:success}
   */
  function updateUI(message, buttonElementId) {
    var infoMessagesTextArea = document.getElementById("infoMessages");
    var strMessage = message;
    try {
      strMessage = JSON.stringify(message);
    } catch(e) {
    }
    infoMessagesTextArea.value = strMessage + "\n" + infoMessagesTextArea.value;

    if(message.hasOwnProperty('success')) {
      if(buttonElementId) {
        if(message.success) {
          document.getElementById(buttonElementId).style.backgroundColor = '#00FF00';
        } else {
          document.getElementById(buttonElementId).style.backgroundColor = '#FF0000';
        }
      }
    } else if(buttonElementId){
      // document.getElementById(buttonElementId).style.backgroundColor = '#FFFFFF';
    }
  }
  function clearMessages(){
    var infoMessagesTextArea = document.getElementById("infoMessages");
    infoMessagesTextArea.value = "";
  }

  function forceDisconnect() {
    var force = new TestBase.ForceDisconnect('./configuration/');
    force.run();
  }


</script>
  <!-- To add a test, add it to the test-src.js (see testSale(...), then add a button to invoke it here -->
  <div id="control">
    <button onclick="saveConfigStatic()">SaveConfig</button><br/>
    <button onclick="forceDisconnect()">Force Device Disconnect</button><br/>
  </div>
  <hr/>
  <div id="tests">
    <button onclick="TestBase.TestSale('./configuration/',                          function(message){updateUI(message, 't1' )})" id="t1" >Test Sale</button><br/>
    <button onclick="TestBase.TestAuth('./configuration/',                          function(message){updateUI(message, 't2' )})" id="t2" >Test Auth</button><br/>
    <button onclick="TestBase.TestPreAuth('./configuration/',                       function(message){updateUI(message, 't3' )})" id="t3" >Test Pre Auth</button><br/>
    <button onclick="TestBase.TestPreAuthCapture('./configuration/',                function(message){updateUI(message, 't4' )})" id="t4" >Test Pre Auth then capture</button><br/>
    <button onclick="TestBase.TestReadCardData('./configuration/',                  function(message){updateUI(message, 't5' )})" id="t5" >Test Reading Card Data</button><br/>
    <button onclick="TestBase.TestShowMessage('./configuration/',                   function(message){updateUI(message, 't6' )})" id="t6" >Test Showing a Message</button><br/>
    <button onclick="TestBase.TestSaleTipAdjust('./configuration/',                 function(message){updateUI(message, 't7' )})" id="t7" >Test doing a sale then a tip adjust (should fail)</button><br/>
    <button onclick="TestBase.TestSaleVoid('./configuration/',                      function(message){updateUI(message, 't8' )})" id="t8" >Test Voiding a Payment</button><br/>
    <button onclick="TestBase.TestSaleRefund('./configuration/',                    function(message){updateUI(message, 't9' )})" id="t9" >Test a full refund of a sale</button><br/>
    <button onclick="TestBase.TestSaleRefundErr('./configuration/',                 function(message){updateUI(message, 't10')})" id="t10">Test a full refund of a sale that should FAIL (no order id set)</button><br/>
    <button onclick="TestBase.TestSalePartialRefund('./configuration/',             function(message){updateUI(message, 't11')})" id="t11">Test a partial refund of a sale</button><br/>
    <button onclick="TestBase.TestShowReceiptOptions('./configuration/',            function(message){updateUI(message, 't12')})" id="t12">Test showing the receipt screen</button><br/>
    <button onclick="TestBase.TestSaleWithReconnectLogic('./configuration/',        function(message){updateUI(message, 't13')})" id="t13">Test Sale that tries to reconnect on timeout</button><br/>
    <button onclick="TestBase.TestSaleRefuseReconnectLogic('./configuration/',      function(message){updateUI(message, 't14')})" id="t14">Test Sale, refuse reconnect request.</button><br/>
    <button onclick="TestBase.TestLogAllFrames('./configuration/',                  function(message){updateUI(message, 't15')})" id="t15">Log all frames.</button><br/>
    <button onclick="TestBase.TestVaultCard('./configuration/',                     function(message){updateUI(message, 't16')})" id="t16">Test Vaulting a card.</button><br/>
    <button onclick="TestBase.TestSaleNullRequest('./configuration/',               function(message){updateUI(message, 't17')})" id="t17">Test a Sale Failure - missing request</button><br/>
    <button onclick="TestBase.TestSaleNullExternalId('./configuration/',            function(message){updateUI(message, 't18')})" id="t18">Test a Sale Failure - missing external id</button><br/>
    <button onclick="TestBase.TestSaleNegZeroAmount('./configuration/',             function(message){updateUI(message, 't19')})" id="t19">Test a Sale Failure - zero amount</button><br/>
    <button onclick="TestBase.TestReadCardDataFail('./configuration/',              function(message){updateUI(message, 't20')})" id="t20">Test a read card data Failure - 0 card entry methods</button><br/>
    <button onclick="TestBase.TestSaleExceptionProcessing('./configuration/',       function(message){updateUI(message, 't21')})" id="t21">Test Sale With Exception Processing</button><br/>
    <button onclick="TestBase.TestSaleDoubleReceiptProcessing('./configuration/',   function(message){updateUI(message, 't22')})" id="t22">Test Sale With Double Receipt Window</button><br/>
    <button onclick="TestBase.TestReset('./configuration/',                         function(message){updateUI(message, 't23')})" id="t23">Test resetting device</button><br/>
  </div>
</body>
</html>